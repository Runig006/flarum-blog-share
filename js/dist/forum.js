module.exports=function(t){var e={};function r(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(a,o,function(e){return t[e]}.bind(null,o));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=12)}([function(t,e){t.exports=flarum.core.compat["forum/app"]},,function(t,e){t.exports=flarum.core.compat["common/utils/Stream"]},function(t,e){t.exports=flarum.core.compat["common/Model"]},function(t,e){t.exports=flarum.core.compat["common/components/Button"]},function(t,e){t.exports=flarum.core.compat["common/models/Discussion"]},function(t,e){t.exports=flarum.core.compat["common/utils/mixin"]},function(t,e){t.exports=flarum.core.compat.extend},function(t,e){t.exports=flarum.core.compat["forum/utils/DiscussionControls"]},function(t,e){t.exports=flarum.core.compat["common/components/Modal"]},function(t,e){t.exports=flarum.core.compat["common/utils/ItemList"]},function(t,e){t.exports=flarum.core.compat["common/components/Switch"]},function(t,e,r){"use strict";r.r(e);var a=r(3),o=r.n(a),n=r(5),l=r.n(n);function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,s(t,e)}var u=r(6),c=function(t){function e(){return t.apply(this,arguments)||this}return i(e,t),e}(r.n(u)()(o.a,{discussion:o.a.hasOne("discussion"),telegram:o.a.attribute("telegram")})),d=r(7),h=r(0),p=r.n(h),g=r(8),f=r.n(g),b=r(9),_=r.n(b),v=r(4),y=r.n(v),x=r(10),S=r.n(x),O=r(2),N=r.n(O),F=r(11),j=r.n(F),w="runig006-blog-share.forum.share_settings.",M=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var r=e.prototype;return r.oninit=function(e){t.prototype.oninit.call(this,e),console.log(this.attrs.discussion.blogShare()),this.share=this.attrs.discussion&&this.attrs.discussion.blogShare()?this.attrs.discussion.blogShare():p.a.store.createRecord("blogShare"),this[this.attrs.mode+"CreateValues"]()},r.className=function(){return"Modal--small Support-Modal"},r.title=function(){return p.a.translator.trans("runig006-blog-share.forum.share_settings.title")},r.content=function(){return m("div",{className:"Modal-body"},m("div",{className:"Form"},this.fields().toArray()))},r.fields=function(){var t=new S.a;return this[this.attrs.mode+"GetFields"](t),t.add("submit",m("div",{className:"Form-group"},y.a.component({type:"submit",className:"Button Button--primary SupportModal-save",loading:this.loading},p.a.translator.trans("core.forum.composer_edit.submit_button"))),-10),t},r.telegramCreateValues=function(){var t,e,r,a,o,n;this.telegram_share=N()(null==(t=this.share)||null==(t=t.telegram())?void 0:t.share,!1),this.telegram_title=N()(null==(e=this.share)||null==(e=e.telegram())?void 0:e.title,null),this.telegram_body=N()(null==(r=this.share)||null==(r=r.telegram())?void 0:r.body,null),this.telegram_button_text=N()(null==(a=this.share)||null==(a=a.telegram())?void 0:a.button_text,null),this.telegram_button_url=N()(null==(o=this.share)||null==(o=o.telegram())?void 0:o.button_url,null),this.telegram_button_rows=N()(null==(n=this.share)||null==(n=n.telegram())?void 0:n.button_rows,null)},r.telegramGetFields=function(t){var e=this;t.add("telegramShared",m("div",{className:"Form-group"},j.a.component({state:1==this.telegram_share(),onchange:function(t){e.telegram_share(t)}},[m("b",null,p.a.translator.trans(w+"telegram.share"))])),-10),t.add("telegramTitle",m("div",{className:"Form-group"},m("label",null,p.a.translator.trans(w+"telegram.title.label"),":"),m("input",{className:"FormControl",bidi:this.telegram_title}),m("small",null,p.a.translator.trans(w+"telegram.title.help"))),-10),t.add("telegramBody",m("div",{className:"Form-group"},m("label",null,p.a.translator.trans(w+"telegram.body.label"),":"),m("textarea",{className:"FormControl",style:{maxWidth:"100%",minWidth:"100%",width:"100%",minHeight:"120px"},bidi:this.telegram_body}),m("small",null,p.a.translator.trans(w+"telegram.body.help"))),-10),t.add("telegramButtonText",m("div",{className:"Form-group"},m("label",null,p.a.translator.trans(w+"telegram.button_text.label"),":"),m("input",{className:"FormControl",bidi:this.telegram_button_text}),m("small",null,p.a.translator.trans(w+"telegram.button_text.help"))),-10),t.add("telegramButtonUrl",m("div",{className:"Form-group"},m("label",null,p.a.translator.trans(w+"telegram.button_url.label"),":"),m("textarea",{className:"FormControl",style:{maxWidth:"100%",minWidth:"100%",width:"100%",minHeight:"120px"},bidi:this.telegram_button_url}),m("small",null,p.a.translator.trans(w+"telegram.button_url.help"))),-10),t.add("telegramButtonRows",m("div",{className:"Form-group"},m("label",null,p.a.translator.trans(w+"telegram.button_rows.label"),":"),m("input",{className:"FormControl",bidi:this.telegram_button_rows}),m("small",null,p.a.translator.trans(w+"telegram.button_rows.help"))),-10)},r.onsubmit=function(t){var e=this;t.preventDefault(),this.loading=!0;var r=this.getObject();r.relationships={discussion:this.attrs.discussion},this.share.save(r).then((function(){e.attrs.discussion&&e.attrs.discussion.pushData({relationships:{blogShare:e.share}}),e.hide(),m.redraw()}),(function(t){e.loading=!1,e.handleErrors(t)}))},r.getObject=function(){var t=this,e={};return e[this.attrs.mode]={},Object.keys(this).forEach((function(r){if(r.startsWith(t.attrs.mode)){var a=r.replace(t.attrs.mode+"_","");e[t.attrs.mode][a]=t[r]}})),e},e}(_.a);app.initializers.add("runig006-flarum-blog-share",(function(t){t.store.models.blogShare=c,l.a.prototype.blogShare=o.a.hasOne("blogShare"),Object(d.extend)(f.a,"userControls",(function(t,e,r){var a;0!=e.blogMeta()&&0!=p.a.forum.attribute("canAutoShare")&&p.a.forum.attribute("blogShareTelegram")&&t.add("telegramShare",y.a.component({className:"Button",onclick:function(){return p.a.modal.show(M,{discussion:e,mode:"telegram"})},icon:"fab fa-telegram",disabled:null==(a=e.blogShare())||null==(a=a.data)?void 0:a.attributes.telegram.shared},p.a.translator.trans("runig006-blog-share.forum.buttons.telegram")),-16)}))}))}]);
//# sourceMappingURL=forum.js.map